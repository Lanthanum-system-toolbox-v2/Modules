!module
class=cpua


!view
view=title
text=Remove Qualcomm Thermal Manager（EXPERIMENTAL）
@show
echo true
@show
root=true
!view

!view
view=subtitle
text=Unexpected results may happen on some kernels, e.g. backport thermal manager, maybe more conservative, will be activated.\nNow we disable them without removing actually.
@show
echo true
@show
root=true
!view

!view
view=switch
text=Enable thermal engine binary file
@show
if [ -e /vendor/bin/thermal-engine ]
then
echo true
fi
@show
root=true
core=true
@current
t=/vendor/bin/thermal-engine
if [ `stat -c%a $t` == 755 ]
then
echo true
fi
@current

@click
t=/vendor/bin/thermal-engine
$mount_system_rw
mount -o rw,remount /vendor
if [ $switch == 1 ]
then
chmod 755 $t
else
chmod 0 $t
fi
$mount_system_ro
mount -o ro,remount /vendor
echo @ierror
echo @toast=Refresh the page is recommended to check if succeed. Applied after reboot.
@click

!view



!module
