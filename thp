!module
class=io

!view
view=title
text=Hugepage Configurations
@show
echo true
@show
!view

!view
view=subtitle
text=Manage the status of Transparent Hugepage
@show
echo true
@show
!view

!view
view=spinner
text=Enabled
@show
if [ -e /sys/kernel/mm/transparent_hugepage/enabled ]
then
echo true
fi
@show
core=true
item_file_thp=/sys/kernel/mm/transparent_hugepage/enabled
@done
echo $label > /sys/kernel/mm/transparent_hugepage/enabled
echo @toast=Successfully applied.
@done
@current
echo "thp_label=`cat /sys/kernel/mm/transparent_hugepage/enabled`"
@current
root=true
onboot=true
!view

!view
view=spinner
text=Disk Defragment
@show
if [ -e /sys/kernel/mm/transparent_hugepage/defrag ]
then
echo true
fi
@show
core=true
item_file_thp=/sys/kernel/mm/transparent_hugepage/defrag
@done
echo $label > /sys/kernel/mm/transparent_hugepage/defrag
echo @toast=Successfully applied.
@done
@current
echo "thp_label=`cat /sys/kernel/mm/transparent_hugepage/defrag`"
@current
root=true
onboot=true
!view

!view
view=switch
text=use 'Zero Page'
@show
if [ -e /sys/kernel/mm/transparent_hugepage/use_zero_page ]
then
echo true
fi
@show

root=true
core=true

@current
if [ `cat /sys/kernel/mm/transparent_hugepage/use_zero_page` == 1 ]
then
echo true
fi
@current

@click
echo $switch > /sys/kernel/mm/transparent_hugepage/use_zero_page
@click

!view



!module
