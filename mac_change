!module
class=extra
!view
view=title
text=Change your MAC Address
@show
echo true
@show
!view

!view
view=subtitle
text=Change this device's MAC Address. (Reboot to restore if you cannot connect any AP after performing a change. AND DO NOT USE THIS FEATURE AGAIN.)
@show
echo true
@show
!view

!view
view=edittext
width=500
text=MAC Addressï¼š
@show
if [ -e /sys/class/net/wlan0/address ]
then
echo true
fi
@show

@current
cat /sys/class/net/wlan0/address
@current

@done
if [ `cat /sys/class/net/wlan0/address` != $edittext ]
then
chmod 644 /sys/class/net/wlan0/address
svc wifi disable
ifconfig wlan0 down
echo "$edittext" > /sys/class/net/wlan0/address
ifconfig wlan0 hw ether "$edittext"
ifconfig wlan0 up
svc wifi enable
fi
@done
root=true
core=true

!view
!module
